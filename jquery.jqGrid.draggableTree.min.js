!function(a){"use strict";function b(c,d,e){var e=a.extend(!0,{drag:{disabled:!1,addClasses:!1,helper:function(){var c=a("<div class='ui-draggable-helper'>Move 1 item</div>");return c[0]},opacity:1,appendTo:"body",cursorAt:{top:0,left:-20},start:function(){}},drop:{disabled:!1,addClasses:!1,drop:function(d,f){var g=a(d.target).attr("id");a(c).jqGrid("getLocalRow",g);var i=a(c).jqGrid("getLocalRow",f.draggable.prop("id")),j=a(c).jqGrid("getNodeParent",i);a(c).jqGrid("getNodeChildren",i).length||(a(c).jqGrid("delTreeNode",f.draggable.prop("id")),a(c).jqGrid("addChildNode",f.draggable.prop("id"),g,i),c.p.onDroppedRow&&a.isFunction(c.p.onDroppedRow)&&c.p.onDroppedRow.call(c,f.draggable.prop("id"),d)===!1&&(a(c).jqGrid("delTreeNode",f.draggable.prop("id")),a(c).jqGrid("addChildNode",f.draggable.prop("id"),j[c.p.localReader.id],i)),b(c,a("#"+a.jgrid.jqID(f.draggable.prop("id"))),e))}}},e||{});a(d).draggable(e.drag).droppable(e.drop)}function c(c,d,e){a("tr",c).each(function(){a(this).is(":data(ui-draggable)")&&!d?a(this).draggable("destroy"):a(this).is(":data(ui-draggable)")||!d||a(this).hasClass("not-draggable-row")||b(c,this,e)})}a.jgrid&&a.jgrid.extend({draggableTree:function(b){var d=!0;return"boolean"==typeof b&&(d=b,b={}),this.each(function(){var e=this,f=a(e).jqGrid("getGridParam","treedatatype");return"local"!=f?(console.warn("treedatatype have to be 'local'"),void 0):(c(e,d,b),a(this).on("jqGridLoadComplete",function(){c(e,d,b)}),void 0)})}})}(jQuery);